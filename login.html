<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>FileVault | Login</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50 min-h-screen flex items-center justify-center p-6">
    <div class="fixed top-4 left-4">
    <button onclick="window.location.href='index.html'" 
            class="bg-gray-800 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700 transition-all shadow-lg flex items-center gap-2">
        <span>‚Üê</span> Return to File Vault
    </button>
</div>

    <div class="max-w-md w-full bg-white p-8 rounded-2xl shadow-xl border border-gray-100">
        <h2 class="text-2xl font-black text-center mb-6 text-gray-800">Manager Login</h2>
        <div class="space-y-4">
            <input type="email" id="email" placeholder="Email" class="w-full p-3 border rounded-xl outline-none focus:ring-2 focus:ring-blue-500"/>
            <input type="password" id="password" placeholder="Password" class="w-full p-3 border rounded-xl outline-none focus:ring-2 focus:ring-blue-500"/>
            <button onclick="signIn()" class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-all">Sign In</button>
        </div>
        <p id="msg" class="mt-4 text-center text-red-500 text-sm"></p>
    </div>

    <script>
        async function checkAccess() {
    const { data: { session } } = await supabase.auth.getSession();

    // If no session exists, it means they aren't the manager
    if (!session) {
        alert("Access Denied. Returning to User Page.");
        window.location.href = "user_index.html"; // Change to your user page filename
    }
}

checkAccess();
        const _supabase = supabase.createClient('https://lvhecpvwpzmstciewziv.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx2aGVjcHZ3cHptc3RjaWV3eml2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwODIzODIsImV4cCI6MjA4NTY1ODM4Mn0.kjaJKidkubl-_-K87WEAe91puG1qoEvJqnfcOiaG2kI');

        async function signIn() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const msg = document.getElementById('msg');

            const { data, error } = await _supabase.auth.signInWithPassword({
                email: email,
                password: password,
            });

            if (error) {
                msg.innerText = error.message;
            } else {
                // If login works, go to the manager page
                window.location.href = "manager.html";
            }
        }
    </script>
</body>
</html>
